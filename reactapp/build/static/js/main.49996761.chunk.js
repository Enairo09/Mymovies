(this.webpackJsonpmymoviz=this.webpackJsonpmymoviz||[]).push([[0],{33:function(e,t,i){e.exports=i(57)},38:function(e,t,i){},44:function(e,t,i){},57:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a),o=i(12),l=i.n(o),s=(i(38),i(14)),c=i(15),r=i(17),h=i(16),m=i(6),d=i(18),v=i(29),p=i(30),u=i(59),k=i(60),f=i(61),g=i(62),O=i(63),C=i(64),b=function(e){function t(e){var i;return Object(s.a)(this,t),(i=Object(r.a)(this,Object(h.a)(t).call(this,e))).handleClick=i.handleClick.bind(Object(m.a)(i)),i.state={selected:i.props.movieLiked},i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(){console.log(this.props.idMovieDB),console.log(this.props.movieName);this.setState({selected:!this.state.selected}),!1===this.state.selected?fetch("/api/mymovies",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"title=".concat(this.props.movieName,"&overview=").concat(this.props.movieDesc,"&poster_path=").concat(this.props.movieImg,"&idMovieDB=").concat(this.props.idMovieDB)}).then((function(e){console.log("this movie is saved",e)})).catch((function(e){console.log("error",e)})):fetch("/api/mymovies/".concat(this.props.idMovieDB),{method:"DELETE"}),this.props.handleClickParent(this.state.selected,this.props.movieName),console.log(this.state.selected)}},{key:"render",value:function(){var e={cursor:"pointer",position:"absolute",top:5,right:5,color:"white"};!0===this.state.selected&&(e.color="#FF6861");var t="";return this.props.displayOnlyLike&&!this.state.selected&&(t="none"),n.a.createElement(u.a,{xs:"12",sm:"6",md:"4",lg:"3",style:{display:t}},n.a.createElement("div",{style:{marginBottom:30}},n.a.createElement(k.a,null,n.a.createElement(f.a,{style:{height:300},top:!0,width:"30",src:"https://image.tmdb.org/t/p/w500/".concat(this.props.movieImg),alt:"Card image cap"}),n.a.createElement(g.a,{style:{backgroundColor:"white",height:400,overflow:"scroll"}},n.a.createElement(v.a,{onClick:this.handleClick,size:"1x",icon:p.a,style:e}),n.a.createElement(O.a,{style:{fontSize:16,textAlign:"center"}},this.props.movieName),n.a.createElement(C.a,{style:{textAlign:"justify"}},this.props.movieDesc)))))}}]),t}(a.Component),y=(i(44),i(45),i(65)),E=i(66),w=i(67),L=i(68),j=i(69),N=i(70),M=i(71),D=i(72),x=i(73),S=i(74),B=i(77),P=i(75),T=i(76),z=function(e){function t(e){var i;return Object(s.a)(this,t),(i=Object(r.a)(this,Object(h.a)(t).call(this,e))).handleClickLikeOff=function(){i.setState({viewOnlyLike:!1})},i.handleClickLikeOn=function(){i.setState({viewOnlyLike:!i.state.viewOnlyLike})},i.handleClick=function(e,t){var a=i.state.movieNameList.slice();if(!1===e)a.push(t),i.setState({movieCount:i.state.movieCount+1,movieNameList:a}),console.log("je suis la",i.state.movieCount);else{var n=a.indexOf(t);a.splice(n,1),i.setState({movieCount:i.state.movieCount-1,movieNameList:a}),console.log("je suis ICI",i.state.movieCount)}},i.handleClickLikeOn=i.handleClickLikeOn.bind(Object(m.a)(i)),i.handleClickLikeOff=i.handleClickLikeOff.bind(Object(m.a)(i)),i.handleClick=i.handleClick.bind(Object(m.a)(i)),i.state={viewOnlyLike:!1,movieCount:0,movieNameList:[],movies:[],moviesLiked:[]},i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/movies").then((function(e){return e.json()})).then((function(t){console.log(t.body.results),e.setState({movies:t.body.results})})).catch((function(e){console.log("request failed",e)})),fetch("/api/mymovies").then((function(e){return e.json()})).then((function(t){var i=t.data.map((function(e){return e.title}));e.setState({moviesLiked:t.data,movieCount:t.data.length,movieNameList:i})})).catch((function(e){console.log("Request failed ->",e)}))}},{key:"render",value:function(){var e=this,t=this.state.movies.map((function(t,i){for(var a=!1,o=0;o<e.state.moviesLiked.length;o++)if(t.id===e.state.moviesLiked[o].idMovieDB){a=!0;break}return n.a.createElement(b,{key:i,movieName:t.title,movieDesc:t.overview,movieImg:t.poster_path,idMovieDB:t.id,movieLiked:a,displayOnlyLike:e.state.viewOnlyLike,handleClickParent:e.handleClick})}));return n.a.createElement("div",null,n.a.createElement(y.a,null,n.a.createElement(E.a,null,n.a.createElement(u.a,null,n.a.createElement(A,{movieLastList:this.state.movieNameList,movieCount:this.state.movieCount,handleClickParentOn:this.handleClickLikeOn,handleClickParentOff:this.handleClickLikeOff}))),n.a.createElement(E.a,null,t,";")))}}]),t}(a.Component),A=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(r.a)(this,Object(h.a)(t).call(this))).toggle=e.toggle.bind(Object(m.a)(e)),e.toggleTwo=e.toggleTwo.bind(Object(m.a)(e)),e.handleClickOn=e.handleClickOn.bind(Object(m.a)(e)),e.handleClickOff=e.handleClickOff.bind(Object(m.a)(e)),e.state={isOpen:!1,popoverOpen:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClickOn",value:function(){this.props.handleClickParentOn()}},{key:"handleClickOff",value:function(){this.props.handleClickParentOff()}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleTwo",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(w.a,{color:"dark",dark:!0,expand:"md"},n.a.createElement("span",{className:"navbar-brand"},n.a.createElement("img",{src:"./logo.png",width:"30",height:"30",className:"d-inline-block align-top",alt:"logo myMoviz"})),n.a.createElement(L.a,{style:{color:"white"},href:"/"},"MyMoviz"),n.a.createElement(j.a,{onClick:this.toggle}),n.a.createElement(N.a,{isOpen:this.isOpen,navbar:!0},n.a.createElement(M.a,{className:"ml-auto",navbar:!0},n.a.createElement(D.a,null,n.a.createElement(x.a,{onClick:this.handleClickOff,style:{color:"white",textAlign:"right"},href:"#"},"All Movies")),n.a.createElement(D.a,null,n.a.createElement(x.a,{onClick:this.handleClickOn,style:{color:"white",textAlign:"right"},href:"#"},"My FavMovies")),n.a.createElement(S.a,{id:"Popover1",type:"button",style:{textAlign:"right",color:"white",backgroundColor:"transparent",borderColor:"transparent"}},this.props.movieCount," films favoris"),n.a.createElement(B.a,{placement:"bottom",isOpen:this.state.popoverOpen,target:"Popover1",toggle:this.toggleTwo},n.a.createElement(P.a,null,"Derniers films ajout\xe9s"),n.a.createElement(T.a,null,this.props.movieLastList.join(", "),"..."))))))}}]),t}(a.Component),I=z;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i(56);l.a.render(n.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.49996761.chunk.js.map